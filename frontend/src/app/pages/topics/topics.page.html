<ion-content [fullscreen]="true" class="topics-page">

  <app-header title="Forum" [logged]="true"></app-header>

  <div class="topics-container">

    <div class="members-link" (click)="goToOnline()">Membres du forum</div>

    <!-- Barre de recherche -->
    <div class="search-bar">
      <input type="text" placeholder="Rechercher..." [(ngModel)]="searchTerm">
      <select [(ngModel)]="searchBy">
        <option value="title">Titre</option>
        <option value="creator">Cr√©ateur</option>
      </select>
      <button (click)="filterTopics()">üîç</button>
    </div>

    <!-- Liste des topics -->
    <div *ngFor="let topic of filteredTopics" class="topic-card" (click)="openTopic(topic.id)">
      <h3>{{ topic.title }}</h3>
      <p class="meta">
        Cr√©√© par {{ topic.creator }} ‚Äî {{ topic.messages }} messages ‚Äî {{ topic.date | date:'dd/MM/yyyy HH:mm' }}
      </p>
    </div>

    <!-- Bouton cr√©er topic -->
    <button class="create-btn" (click)="openCreateTopicPopup()">‚ûï Cr√©er un topic</button>

    <!-- Popup cr√©ation topic -->
    <div *ngIf="showPopup" class="popup">
      <div class="popup-card">
        <h3>Nouveau topic</h3>
        <input type="text" placeholder="Titre du topic" [(ngModel)]="newTopicTitle">
        <div class="popup-buttons">
          <button (click)="createTopic()">Cr√©er</button>
          <button (click)="showPopup=false">Annuler</button>
        </div>
      </div>
    </div>

  </div>

</ion-content>
